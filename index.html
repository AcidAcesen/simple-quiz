<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz System - Select Exam</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Quiz & Flashcard System</h1>
            <p>Select an exam to begin</p>
        </header>

        <main id="exam-list" class="exam-list">
            <div class="loading">Loading available exams...</div>
        </main>
    </div>

    <script>
        // Auto-load exam list - Just add JSON filenames here!
        // The title and description are automatically extracted from each JSON file
        const examFiles = [
            'comptia_sec_plus.json',
            'security_plus_questions_v2.json'
        ];

        const examListContainer = document.getElementById('exam-list');

        // Fetch and display exams automatically
        async function loadAndDisplayExams() {
            examListContainer.innerHTML = '<div class="loading">Loading available exams...</div>';

            const exams = [];

            // Fetch each JSON file and extract metadata
            for (const filename of examFiles) {
                try {
                    const response = await fetch(`mats_json/${filename}`);
                    if (response.ok) {
                        const data = await response.json();
                        exams.push({
                            filename: filename,
                            title: data.title || 'Untitled Exam',
                            description: data.description || 'No description available',
                            dataFile: `mats_json/${filename}`
                        });
                    } else {
                        console.error(`Failed to load ${filename}`);
                    }
                } catch (error) {
                    console.error(`Error loading ${filename}:`, error);
                }
            }

            // Display the exams
            examListContainer.innerHTML = '';

            if (exams.length === 0) {
                examListContainer.innerHTML = '<div class="loading">No exams found</div>';
                return;
            }

            exams.forEach(exam => {
                const examCard = document.createElement('div');
                examCard.className = 'exam-card';
                examCard.innerHTML = `
                    <h2>${exam.title}</h2>
                    <p>${exam.description}</p>
                    <div class="exam-buttons">
                        <button onclick="startExam('${exam.dataFile}', '${exam.title}', null)" class="btn-primary">Start Full Quiz</button>
                        <button onclick="startExam('${exam.dataFile}', '${exam.title}', 10)" class="btn-secondary">Quick Quiz (10 Questions)</button>
                    </div>
                `;
                examListContainer.appendChild(examCard);
            });
        }

        function startExam(dataFile, name, questionLimit) {
            // Store exam info in sessionStorage
            sessionStorage.setItem('examDataFile', dataFile);
            sessionStorage.setItem('examName', name);
            sessionStorage.setItem('questionLimit', questionLimit);
            // Navigate to quiz page
            window.location.href = 'quiz.html';
        }

        // Initialize
        loadAndDisplayExams();
    </script>
</body>
</html>
